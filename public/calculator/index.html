<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>창업 비용 계산기 - 요알남</title>
    
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- shadcn/ui inspired Design System -->
    <link href="../css/shadcn-design.css" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        /* Page Header */
        .page-header {
            padding: 3rem 0 2rem;
            background: linear-gradient(135deg, hsl(var(--background)) 0%, hsl(var(--secondary) / 0.3) 100%);
            border-bottom: 1px solid hsl(var(--border));
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .page-description {
            font-size: 1.125rem;
            color: hsl(var(--muted-foreground));
        }
        
        /* Calculator Layout */
        .calculator-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 968px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Input Cards */
        .input-card {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            padding: 1.5rem;
            transition: all 200ms;
        }
        
        .input-card:hover {
            box-shadow: 0 4px 12px hsl(var(--foreground) / 0.05);
            border-color: hsl(var(--primary) / 0.3);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid hsl(var(--border));
        }
        
        .card-icon {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: hsl(var(--primary) / 0.1);
            color: hsl(var(--primary));
            border-radius: calc(var(--radius) - 2px);
            font-size: 1.125rem;
        }
        
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
        }
        
        /* Form Groups */
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: hsl(var(--foreground));
            margin-bottom: 0.5rem;
        }
        
        .form-input {
            width: 100%;
            padding: 0.625rem 0.875rem;
            background: hsl(var(--background));
            border: 1px solid hsl(var(--input));
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.9375rem;
            color: hsl(var(--foreground));
            transition: all 150ms;
        }
        
        .form-input:focus {
            outline: none;
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 3px hsl(var(--ring) / 0.1);
        }
        
        .form-input::placeholder {
            color: hsl(var(--muted-foreground));
        }
        
        /* Input with Unit */
        .input-with-unit {
            position: relative;
        }
        
        .input-unit {
            position: absolute;
            right: 0.875rem;
            top: 50%;
            transform: translateY(-50%);
            color: hsl(var(--muted-foreground));
            font-size: 0.875rem;
            pointer-events: none;
        }
        
        .input-with-unit .form-input {
            padding-right: 3rem;
        }
        
        /* Select */
        .form-select {
            width: 100%;
            padding: 0.625rem 2.5rem 0.625rem 0.875rem;
            background: hsl(var(--background));
            border: 1px solid hsl(var(--input));
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.9375rem;
            color: hsl(var(--foreground));
            cursor: pointer;
            transition: all 150ms;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 9L2 5h8z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.875rem center;
        }
        
        .form-select:focus {
            outline: none;
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 3px hsl(var(--ring) / 0.1);
        }
        
        /* Helper Text */
        .helper-text {
            font-size: 0.75rem;
            color: hsl(var(--muted-foreground));
            margin-top: 0.25rem;
        }
        
        /* Results Section */
        .results-section {
            background: hsl(var(--card));
            border: 2px solid hsl(var(--primary) / 0.2);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .results-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .results-subtitle {
            color: hsl(var(--muted-foreground));
        }
        
        /* Result Cards */
        .result-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .result-card {
            background: hsl(var(--secondary) / 0.3);
            padding: 1.25rem;
            border-radius: calc(var(--radius) - 2px);
            text-align: center;
        }
        
        .result-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: hsl(var(--muted-foreground));
            margin-bottom: 0.5rem;
        }
        
        .result-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: hsl(var(--primary));
        }
        
        .result-unit {
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
            margin-left: 0.25rem;
        }
        
        /* Chart Container */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 2rem 0;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }
        
        .calculate-btn {
            padding: 0.875rem 2rem;
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border: none;
            border-radius: calc(var(--radius) - 2px);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 150ms;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .calculate-btn:hover {
            background: hsl(var(--primary) / 0.9);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px hsl(var(--primary) / 0.3);
        }
        
        .reset-btn {
            padding: 0.875rem 2rem;
            background: transparent;
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--border));
            border-radius: calc(var(--radius) - 2px);
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            transition: all 150ms;
        }
        
        .reset-btn:hover {
            background: hsl(var(--secondary));
            border-color: hsl(var(--secondary));
        }
        
        .export-btn {
            padding: 0.875rem 2rem;
            background: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
            border: none;
            border-radius: calc(var(--radius) - 2px);
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            transition: all 150ms;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .export-btn:hover {
            background: hsl(var(--secondary) / 0.8);
        }
        
        /* Info Box */
        .info-box {
            background: hsl(var(--secondary) / 0.2);
            border: 1px solid hsl(var(--border));
            border-radius: calc(var(--radius) - 2px);
            padding: 1rem;
            margin-top: 1rem;
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }
        
        .info-icon {
            color: hsl(var(--primary));
            font-size: 1.125rem;
            flex-shrink: 0;
        }
        
        .info-content {
            flex: 1;
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
            line-height: 1.6;
        }
        
        /* Tabs */
        .tabs-container {
            margin: 2rem 0;
        }
        
        .tabs-list {
            display: flex;
            background: hsl(var(--secondary) / 0.3);
            padding: 0.25rem;
            border-radius: calc(var(--radius) - 2px);
            margin-bottom: 1.5rem;
        }
        
        .tab-trigger {
            flex: 1;
            padding: 0.625rem 1rem;
            background: transparent;
            border: none;
            border-radius: calc(var(--radius) - 4px);
            font-size: 0.875rem;
            font-weight: 500;
            color: hsl(var(--muted-foreground));
            cursor: pointer;
            transition: all 150ms;
        }
        
        .tab-trigger:hover {
            color: hsl(var(--foreground));
        }
        
        .tab-trigger.active {
            background: hsl(var(--background));
            color: hsl(var(--foreground));
            box-shadow: 0 1px 3px hsl(var(--foreground) / 0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .page-title {
                font-size: 2rem;
            }
            
            .calculator-wrapper {
                padding: 1rem 0.5rem;
            }
            
            .input-card {
                padding: 1.25rem;
            }
            
            .result-cards {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .calculate-btn,
            .reset-btn,
            .export-btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* Loading State */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: hsl(var(--background) / 0.8);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .loading-overlay.active {
            display: flex;
        }
        
        .loading-spinner {
            width: 3rem;
            height: 3rem;
            border: 3px solid hsl(var(--muted));
            border-top-color: hsl(var(--primary));
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        
        .tooltip-icon {
            color: hsl(var(--muted-foreground));
            font-size: 0.875rem;
            margin-left: 0.25rem;
        }
        
        .tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: hsl(var(--foreground));
            color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 150ms;
            margin-bottom: 0.5rem;
            z-index: 10;
        }
        
        .tooltip:hover .tooltip-content {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="flex items-center justify-between">
                <a href="/" class="nav-brand">
                    <i class="fas fa-utensils"></i>
                    <span>요알남</span>
                </a>
                
                <ul class="nav-menu">
                    <li><a href="/" class="nav-link">홈</a></li>
                    <li><a href="../infographics.html" class="nav-link">인포그래픽</a></li>
                    <li><a href="index.html" class="nav-link active">창업 계산기</a></li>
                    <li><a href="../checklist.html" class="nav-link">체크리스트</a></li>
                    <li><a href="../chatbot.html" class="nav-link">AI 챗봇</a></li>
                </ul>
                
                <div class="flex items-center gap-2">
                    <button class="btn btn-ghost btn-icon theme-toggle" aria-label="Toggle theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    
                    <button class="btn btn-ghost btn-icon mobile-menu-btn" aria-label="Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h1 class="page-title">
                <i class="fas fa-calculator"></i>
                창업 비용 계산기
            </h1>
            <p class="page-description">
                정확한 데이터 기반으로 외식업 창업 비용과 손익분기점을 계산해보세요
            </p>
        </div>
    </div>

    <!-- Calculator -->
    <div class="calculator-wrapper">
        <!-- Tabs -->
        <div class="tabs-container">
            <div class="tabs-list">
                <button class="tab-trigger active" data-tab="initial">초기 투자비용</button>
                <button class="tab-trigger" data-tab="monthly">월 운영비용</button>
                <button class="tab-trigger" data-tab="revenue">예상 매출</button>
            </div>
            
            <!-- Initial Investment Tab -->
            <div class="tab-content active" id="initial">
                <div class="calculator-grid">
                    <!-- Store Info -->
                    <div class="input-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <h3 class="card-title">매장 정보</h3>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                업종 선택
                                <span class="tooltip">
                                    <i class="fas fa-question-circle tooltip-icon"></i>
                                    <span class="tooltip-content">운영하실 외식업 종류를 선택하세요</span>
                                </span>
                            </label>
                            <select class="form-select" id="businessType">
                                <option value="">선택하세요</option>
                                <option value="cafe">카페</option>
                                <option value="restaurant">일반음식점</option>
                                <option value="fastfood">패스트푸드</option>
                                <option value="bar">주점</option>
                                <option value="bakery">베이커리</option>
                                <option value="delivery">배달전문점</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">매장 면적</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="storeSize" placeholder="0">
                                <span class="input-unit">평</span>
                            </div>
                            <div class="helper-text">약 <span id="storeSizeM2">0</span>㎡</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">좌석 수</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="seats" placeholder="0">
                                <span class="input-unit">석</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Initial Costs -->
                    <div class="input-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <i class="fas fa-coins"></i>
                            </div>
                            <h3 class="card-title">초기 비용</h3>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">임대 보증금</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="deposit" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">권리금</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="premium" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">인테리어 비용</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="interior" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                            <div class="helper-text">평당 약 <span id="interiorPerPyung">0</span>만원</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">주방설비 비용</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="equipment" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Monthly Costs Tab -->
            <div class="tab-content" id="monthly">
                <div class="calculator-grid">
                    <!-- Fixed Costs -->
                    <div class="input-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <i class="fas fa-file-invoice-dollar"></i>
                            </div>
                            <h3 class="card-title">고정비용</h3>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">월 임대료</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="monthlyRent" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">인건비</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="laborCost" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                            <div class="helper-text">사업주 인건비 포함</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">관리비 및 공과금</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="utilities" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Variable Costs -->
                    <div class="input-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3 class="card-title">변동비용</h3>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">식재료비 (매출 대비)</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="foodCostRatio" placeholder="35" value="35">
                                <span class="input-unit">%</span>
                            </div>
                            <div class="helper-text">일반적으로 30-40%</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">마케팅비</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="marketing" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">기타 운영비</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="otherCosts" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Revenue Tab -->
            <div class="tab-content" id="revenue">
                <div class="calculator-grid">
                    <!-- Sales Projection -->
                    <div class="input-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <i class="fas fa-cash-register"></i>
                            </div>
                            <h3 class="card-title">매출 예측</h3>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">객단가</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="avgPrice" placeholder="0">
                                <span class="input-unit">원</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">일 평균 고객 수</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="dailyCustomers" placeholder="0">
                                <span class="input-unit">명</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">월 영업일수</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="operatingDays" placeholder="26" value="26">
                                <span class="input-unit">일</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Growth Projection -->
                    <div class="input-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3 class="card-title">성장 예측</h3>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">목표 월 매출</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="targetRevenue" placeholder="0">
                                <span class="input-unit">만원</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">예상 성장률 (월)</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="growthRate" placeholder="5" value="5">
                                <span class="input-unit">%</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">배달 매출 비중</label>
                            <div class="input-with-unit">
                                <input type="number" class="form-input" id="deliveryRatio" placeholder="0">
                                <span class="input-unit">%</span>
                            </div>
                            <div class="helper-text">배달앱 수수료 약 15% 적용</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="calculate-btn" onclick="calculateAll()">
                <i class="fas fa-calculator"></i>
                계산하기
            </button>
            <button class="reset-btn" onclick="resetCalculator()">
                <i class="fas fa-redo"></i>
                초기화
            </button>
        </div>
        
        <!-- Results Section -->
        <div class="results-section" id="results" style="display: none;">
            <div class="results-header">
                <h2 class="results-title">계산 결과</h2>
                <p class="results-subtitle">예상 창업 비용과 수익성 분석</p>
            </div>
            
            <!-- Key Metrics -->
            <div class="result-cards">
                <div class="result-card">
                    <div class="result-label">총 초기 투자금</div>
                    <div class="result-value" id="totalInvestment">0<span class="result-unit">만원</span></div>
                </div>
                <div class="result-card">
                    <div class="result-label">월 순이익</div>
                    <div class="result-value" id="monthlyProfit">0<span class="result-unit">만원</span></div>
                </div>
                <div class="result-card">
                    <div class="result-label">손익분기점</div>
                    <div class="result-value" id="breakEven">0<span class="result-unit">개월</span></div>
                </div>
                <div class="result-card">
                    <div class="result-label">투자 수익률 (ROI)</div>
                    <div class="result-value" id="roi">0<span class="result-unit">%</span></div>
                </div>
            </div>
            
            <!-- Chart -->
            <div class="chart-container">
                <canvas id="profitChart"></canvas>
            </div>
            
            <!-- Export Button -->
            <div class="action-buttons">
                <button class="export-btn" onclick="exportResults()">
                    <i class="fas fa-download"></i>
                    결과 다운로드 (PDF)
                </button>
            </div>
        </div>
        
        <!-- Info Box -->
        <div class="info-box">
            <i class="fas fa-info-circle info-icon"></i>
            <div class="info-content">
                <strong>참고사항:</strong> 이 계산기는 일반적인 외식업 창업 비용을 추정하는 도구입니다. 
                실제 비용은 지역, 업종, 규모 등에 따라 크게 달라질 수 있으니, 정확한 사업 계획을 위해서는 
                전문가 상담을 받으시기 바랍니다.
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <script>
        // Theme Toggle
        const themeToggle = document.querySelector('.theme-toggle');
        const body = document.body;
        const icon = themeToggle.querySelector('i');
        
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            body.classList.add('dark');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        }
        
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark');
            const isDark = body.classList.contains('dark');
            
            if (isDark) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            }
        });
        
        // Mobile Menu
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navMenu = document.querySelector('.nav-menu');
        
        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
        }
        
        // Tab Switching
        const tabTriggers = document.querySelectorAll('.tab-trigger');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabTriggers.forEach(trigger => {
            trigger.addEventListener('click', () => {
                const targetTab = trigger.dataset.tab;
                
                // Update triggers
                tabTriggers.forEach(t => t.classList.remove('active'));
                trigger.classList.add('active');
                
                // Update contents
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === targetTab) {
                        content.classList.add('active');
                    }
                });
            });
        });
        
        // Store size conversion
        const storeSizeInput = document.getElementById('storeSize');
        const storeSizeM2 = document.getElementById('storeSizeM2');
        
        storeSizeInput.addEventListener('input', () => {
            const pyung = parseFloat(storeSizeInput.value) || 0;
            const m2 = (pyung * 3.3058).toFixed(1);
            storeSizeM2.textContent = m2;
            
            // Update interior cost per pyung
            updateInteriorPerPyung();
        });
        
        // Interior cost per pyung
        const interiorInput = document.getElementById('interior');
        const interiorPerPyung = document.getElementById('interiorPerPyung');
        
        function updateInteriorPerPyung() {
            const interior = parseFloat(interiorInput.value) || 0;
            const size = parseFloat(storeSizeInput.value) || 0;
            
            if (size > 0) {
                const perPyung = (interior / size).toFixed(0);
                interiorPerPyung.textContent = perPyung;
            } else {
                interiorPerPyung.textContent = '0';
            }
        }
        
        interiorInput.addEventListener('input', updateInteriorPerPyung);
        
        // Calculate function
        let profitChart = null;
        
        function calculateAll() {
            // Show loading
            document.getElementById('loadingOverlay').classList.add('active');
            
            setTimeout(() => {
                // Get all input values
                const deposit = parseFloat(document.getElementById('deposit').value) || 0;
                const premium = parseFloat(document.getElementById('premium').value) || 0;
                const interior = parseFloat(document.getElementById('interior').value) || 0;
                const equipment = parseFloat(document.getElementById('equipment').value) || 0;
                
                const monthlyRent = parseFloat(document.getElementById('monthlyRent').value) || 0;
                const laborCost = parseFloat(document.getElementById('laborCost').value) || 0;
                const utilities = parseFloat(document.getElementById('utilities').value) || 0;
                const marketing = parseFloat(document.getElementById('marketing').value) || 0;
                const otherCosts = parseFloat(document.getElementById('otherCosts').value) || 0;
                
                const avgPrice = parseFloat(document.getElementById('avgPrice').value) || 0;
                const dailyCustomers = parseFloat(document.getElementById('dailyCustomers').value) || 0;
                const operatingDays = parseFloat(document.getElementById('operatingDays').value) || 26;
                const foodCostRatio = parseFloat(document.getElementById('foodCostRatio').value) || 35;
                
                // Calculate total investment
                const totalInvestment = deposit + premium + interior + equipment;
                
                // Calculate monthly revenue
                const monthlyRevenue = (avgPrice * dailyCustomers * operatingDays) / 10000; // Convert to 만원
                
                // Calculate monthly costs
                const foodCost = monthlyRevenue * (foodCostRatio / 100);
                const totalMonthlyCost = monthlyRent + laborCost + utilities + marketing + otherCosts + foodCost;
                
                // Calculate profit
                const monthlyProfit = monthlyRevenue - totalMonthlyCost;
                
                // Calculate break-even
                const breakEven = monthlyProfit > 0 ? Math.ceil(totalInvestment / monthlyProfit) : 0;
                
                // Calculate ROI
                const yearlyProfit = monthlyProfit * 12;
                const roi = totalInvestment > 0 ? ((yearlyProfit / totalInvestment) * 100).toFixed(1) : 0;
                
                // Update results
                document.getElementById('totalInvestment').innerHTML = `${totalInvestment.toLocaleString()}<span class="result-unit">만원</span>`;
                document.getElementById('monthlyProfit').innerHTML = `${monthlyProfit.toFixed(0).toLocaleString()}<span class="result-unit">만원</span>`;
                document.getElementById('breakEven').innerHTML = breakEven > 0 ? `${breakEven}<span class="result-unit">개월</span>` : '-';
                document.getElementById('roi').innerHTML = `${roi}<span class="result-unit">%</span>`;
                
                // Create or update chart
                createProfitChart(monthlyRevenue, totalMonthlyCost, monthlyProfit);
                
                // Show results
                document.getElementById('results').style.display = 'block';
                
                // Scroll to results
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
                
                // Hide loading
                document.getElementById('loadingOverlay').classList.remove('active');
            }, 500);
        }
        
        function createProfitChart(revenue, cost, profit) {
            const ctx = document.getElementById('profitChart').getContext('2d');
            
            if (profitChart) {
                profitChart.destroy();
            }
            
            // Generate 12 months projection
            const labels = [];
            const revenueData = [];
            const costData = [];
            const profitData = [];
            
            for (let i = 1; i <= 12; i++) {
                labels.push(`${i}개월`);
                revenueData.push(revenue);
                costData.push(cost);
                profitData.push(profit);
            }
            
            profitChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '매출',
                            data: revenueData,
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: '비용',
                            data: costData,
                            borderColor: 'rgb(239, 68, 68)',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: '순이익',
                            data: profitData,
                            borderColor: 'rgb(34, 197, 94)',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: '12개월 수익 예측'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString() + '만원';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function resetCalculator() {
            if (confirm('모든 입력값을 초기화하시겠습니까?')) {
                // Reset all inputs
                document.querySelectorAll('.form-input, .form-select').forEach(input => {
                    input.value = '';
                });
                
                // Reset some defaults
                document.getElementById('operatingDays').value = '26';
                document.getElementById('foodCostRatio').value = '35';
                document.getElementById('growthRate').value = '5';
                
                // Hide results
                document.getElementById('results').style.display = 'none';
                
                // Destroy chart
                if (profitChart) {
                    profitChart.destroy();
                    profitChart = null;
                }
                
                // Update conversions
                storeSizeM2.textContent = '0';
                interiorPerPyung.textContent = '0';
            }
        }
        
        function exportResults() {
            alert('PDF 다운로드 기능은 준비 중입니다.');
        }
    </script>
</body>
</html>